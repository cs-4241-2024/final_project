<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{game.name}}</title>
    <link rel="stylesheet" href="/gamepage.css">
</head>
<body>
    <div class="container">
        <a class="back-button" href="/">Back to Game List</a>
        <h1 class="game-title">{{game.name}}</h1>
        <img class="game-image" src="{{game.img_url}}" alt="{{game.name}}">
        <div class="description">
            <strong>About This Game:</strong> {{game.full_desc.desc}} <!-- Display the description -->
        </div>
        
        <h2>Reviews</h2>
        <div class="reviews">
            {{#each reviews}}
            <div class="review">
                <p><strong>{{this.name}}</strong> (Rating: {{this.rating}}/5)</p>
                <p>{{this.review}}</p>
            </div>
            {{/each}}
        </div>

        <form class="review-form" action="/game/{{game._id}}/review" method="POST">
            <input type="text" name="name" required placeholder="Your Name" class="name-input" />
            
            <div class="rating">
                <span class="star" data-value="1">★</span>
                <span class="star" data-value="2">★</span>
                <span class="star" data-value="3">★</span>
                <span class="star" data-value="4">★</span>
                <span class="star" data-value="5">★</span>
            </div>
            <input type="hidden" name="rating" id="rating" required />

            <textarea name="review" required placeholder="Write your review here..." class="review-textarea"></textarea>
            <button type="submit" class="submit-button">Submit Review</button>
        </form>
    </div>

    <script>
        const stars = document.querySelectorAll('.star');
        const ratingInput = document.getElementById('rating');

        stars.forEach(star => {
            star.addEventListener('click', () => {
                const value = star.getAttribute('data-value');
                ratingInput.value = value; // Set the hidden input value
                stars.forEach(s => s.classList.remove('selected')); // Clear all stars
                for (let i = 0; i < value; i++) {
                    stars[i].classList.add('selected'); // Add selected class to the clicked star and previous stars
                }
            });
        });
    </script>
</body>
</html>